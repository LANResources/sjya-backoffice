- title "#{@user.full_name}'s Profile"

- breadcrumbs ['People', users_path], @user.full_name

.row
  .col-md-12
    .box
      .box-header
        %h2
          %i.fa.fa-user
        - if policy(@user).edit?
          .box-icon
            = link_to edit_user_path(@user), title: 'Edit' do
              %i.fa.fa-pencil

      .box-content
        .row
          .col-md-2
            = image_tag(@user.avatar.url(:small), class: "img-rounded")
          .col-md-5
            %h2= @user.organization_name
            %h4
              %span.label.label-info= @user.role.titleize
              = user_status_link @user
            %p
              %strong Title
              %br/
              = @user.title
            %p
              %address
                %strong Address
                %br/
                - unless @user.address.blank?
                  = @user.address
                  %br/
                = city_state_zip @user.city, @user.state, @user.zipcode
            %p
              %strong Phone
              %br/
              = @user.phone.present? ? format_as_phone_number(@user.phone) : 'Unknown'
            %p
              %strong Email
              %br/
              = @user.email.present? ? mail_to(@user.email) : 'Unknown'

.row
  .col-md-6
    .box
      .box-header
        %h2
          %i.fa.fa-user
          Activities

      .box-content
        - if @user.attempts.any?
          %table.table
            %thead
              %tr
                %th Date
            %tbody
              - @user.attempts.each do |attempt|
                %tr
                  %td= (attempt.activity_date || attempt.updated_at).strftime('%B %-d, %Y')
        - else
          No activities

  .col-md-6
    .box
      .box-header
        %h2
          %i.fa.fa-user
          Documents

      .box-content
        - if @user.documents.any?
          %table.table
            %thead
              %tr
                %th 
                %th Updated At
                %th
            %tbody
              - @user.documents.each do |document|
                %tr
                  %td
                    = file_type_label document.content_type
                    = "&nbsp;".html_safe
                    = link_to document.name, document
                    %small
                      %i= " (#{number_to_human_size document.item_size})"
                  %td.c
                    = document.updated_at.strftime '%-m/%-d/%Y %-I:%M %p'
                  %td.r
                    .btn-group
                      = link_to download_document_path(document), title: "Download", class: 'btn btn-sm btn-success', data: { 'no-turbolink' => true } do
                        %i.fa.fa-download
                      - if policy(document).edit?
                        = link_to edit_document_path(document), title: "Edit Document", class: "btn btn-sm btn-warning" do
                          %i.fa.fa-pencil
                      - if policy(document).destroy?
                        = link_to document, title: "Remove", class: "btn btn-sm btn-danger", data: { confirm: 'Are you sure?' }, method: :delete do
                          %i.fa.fa-trash-o
        - else
          No documents


